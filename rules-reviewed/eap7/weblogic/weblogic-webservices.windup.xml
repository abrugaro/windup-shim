weblogic-webservices-eap7:
  metadata:
    description: This ruleset contains rules to detect WebLogic specific web services
      code, and to assist in the conversion of this code to code that is compatible
      with JBoss EAP 7+.
    sourceTechnologies:
    - id: weblogic
      versionRange: null
    tags:
    - webservice
    targetTechnologies:
    - id: eap
      versionRange: '[7,8)'
  original-file: https://github.com/windup/windup-rulesets/tree/master/rules-reviewed/eap7/weblogic/weblogic-webservices.windup.xml
  rules:
    weblogic-webservices-07000:
      perform:
        hint:
          category-id: mandatory
          effort: '3'
          links:
          - href: https://docs.oracle.com/middleware/11119/wls/WSREF/annotations.htm#i1058163
            title: WebLogic-specific Annotations - Transactional
          - href: https://access.redhat.com/webassets/avalon/d/red-hat-jboss-enterprise-application-platform/7.0.0/javadocs/javax/ejb/TransactionAttribute.html
            title: JBoss EAP 7 - API TransactionAttribute
          message: Replace WebLogic proprietary web-service annotation `@Transactional`
            by the standard Java EE annotation `@TransactionAttribute`.
          tags:
          - webservice
          - weblogic
          title: WebLogic proprietary web service annotation @Transactional
      when:
        javaclass:
          location: ANNOTATION
          references: weblogic.jws.Transactional
      where: {}
    weblogic-webservices-eap7-01000:
      perform:
        hint:
          category-id: mandatory
          effort: '1'
          links:
          - href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/developing_web_services_applications/#developing_jax_ws_web_services
            title: Developing JAX-WS Web Services
          message: This web service stub uses the WebLogic proprietary web service
            implementation class ("weblogic.wsee.jaxrpc.ServiceImpl"). It might have
            been generated by a WebLogic proprietary tool. This should be replaced
            using the standard Java EE JAX-WS framework. It could be regenerated using
            the JBoss web services tools. Please refer to the [Developing JAX-WS Web
            Services](https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/developing_web_services_applications/#developing_jax_ws_web_services)
            guide for more information.
          tags:
          - webservice
          - weblogic
          title: WebLogic proprietary web service implementation class
      when:
        javaclass:
          location: INHERITANCE
          references: weblogic.wsee.jaxrpc.ServiceImpl
      where: {}
    weblogic-webservices-eap7-02000:
      perform:
        hint:
          category-id: mandatory
          effort: '3'
          links:
          - href: https://docs.oracle.com/cd/E23943_01/web.1111/e15184/asynch.htm
            title: WebLogic Asynchronous Execution Documentation
          - href: https://access.redhat.com/documentation/en-us/JBoss_Enterprise_Application_Platform/6.4/html/Development_Guide/sect-JAX-WS_Web_Service_Clients.html
            title: JAX-WS Web Service Clients
          message: The [WebLogic proprietary Asynchronous Web Service Client API](https://docs.oracle.com/cd/E23943_01/web.1111/e15184/asynch.htm)
            should be replaced using calls to the JAX-WS asynchronous API. More information
            is available in the [JAX-WS Web Service Clients](https://access.redhat.com/documentation/en-us/JBoss_Enterprise_Application_Platform/6.4/html/Development_Guide/sect-JAX-WS_Web_Service_Clients.html).
          tags:
          - webservice
          - client
          - weblogic
          title: WebLogic asynchronous web service client
      when:
        javaclass:
          references: weblogic.wsee.async.AsyncPreCallContext
      where: {}
    weblogic-webservices-eap7-03000:
      perform:
        hint:
          category-id: mandatory
          effort: '3'
          links:
          - href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/developing_web_services_applications/#ws_sec_ws
            title: Securing JAX-WS Web Services
          message: 'Replace proprietary web-service authentication with JAX-WS standard
            calls. To attach authentication with JBoss EAP, simply use the following
            code: ```java URL wsdlURL = new File("resources/jaxws/samples/context/WEB-INF/wsdl/TestEndpoint.wsdl").toURL();
            QName qname = new QName("http://org.jboss.ws/jaxws/context", "TestEndpointService");
            Service service = Service.create(wsdlURL, qname); port = (TestEndpoint)service.getPort(TestEndpoint.class);
            BindingProvider bp = (BindingProvider)port; bp.getRequestContext().put(BindingProvider.USERNAME_PROPERTY,
            "jsmith"); bp.getRequestContext().put(BindingProvider.PASSWORD_PROPERTY,
            "PaSSw0rd"); ```'
          tags:
          - webservice
          - security
          - weblogic
          title: WebLogic proprietary web service authentication
      when:
        javaclass:
          location: METHOD_CALL
          references: weblogic.wsee.connection.transport.http.HttpTransportInfo.setUsername({*})
      where: {}
    weblogic-webservices-eap7-04000:
      perform:
        hint:
          category-id: mandatory
          effort: '1'
          links:
          - href: http://docs.oracle.com/javaee/7/api/javax/xml/ws/WebServiceContext.html
            title: javax.xml.WebServiceContext Documentation
          message: 'This code uses the WebLogic specific class `weblogic.wsee.context.WebServiceContext`.
            This usage will need to be replaced with the Java Enterprise Edition standard
            `javax.xml.WebServiceContext` interface. Example code: ```java @Resource
            private WebServiceContext webServiceContext; ```'
          tags:
          - webservice
          - context
          - weblogic
          title: WebLogic proprietary web services API - weblogic.wsee.context.WebServiceContext
      when:
        javaclass:
          references: weblogic.wsee.context.WebServiceContext
      where: {}
    weblogic-webservices-eap7-05000:
      perform:
        hint:
          category-id: mandatory
          effort: '1'
          links: []
          message: This exception (`weblogic.wsee.context.ContextNotFoundException`)
            is WebLogic specific and can be removed.
          tags:
          - webservice
          - context
          - weblogic
          title: WebLogic proprietary web services API - ContextNotFoundException
      when:
        javaclass:
          references: weblogic.wsee.context.ContextNotFoundException
      where: {}
    weblogic-webservices-eap7-06000:
      perform:
        hint:
          category-id: mandatory
          effort: '1'
          links:
          - href: https://docs.oracle.com/cd/E13222_01/wls/docs90/webserv/anttasks.html#1039270
            title: Oracle ClientGen Ant Task Reference
          - href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/developing_web_services_applications/#using_jax_ws_tools
            title: Developing Web Services Applications - Using JAX-WS Tools
          - href: https://jax-ws.java.net/nonav/2.2.6/docs/ch04.html#tools-wsgen
            title: JAX-WS - wsgen
          - href: https://cxf.apache.org/docs/tools.html
            title: Apache CXF tools
          message: This class has been generated by a WebLogic web service client
            generator (ClientGen). It could be replaced by an equivalent standard
            Java EE technology using for example the EAP 7 wsconsume tool, the wsgen
            tool or the CXF tools.
          tags:
          - webservice
          - client
          - weblogic
          title: WebLogic proprietary web services generated client classes
      when:
        or:
        - javaclass:
            references: weblogic.wsee.tools.clientgen.{*}
        - javaclass:
            references: weblogic.webservice.{*}
      where: {}
